//<% if @piece != nil%>

//<% broadcast "/game/" + @game.id.to_s do %>
//var empty = []
//<% @empty.each do |coordinates|%>
//empty.push(<%=coordinates%>)

//<%end%>
//	parseResponseObject({id:<%= @piece.id%>, piece_type:"<%= @piece.piece_type%>", owner_id:<%= @piece.user_id%>, battle_id:<%= @piece.battle_id%>, coordinates:"<%= @oldmove%>"}, <%= @move%>,empty,<%=@battle.turn%>)

//<% end %>
//<%end%>

<%if @location != nil%>

	parseResponseObject("location",{name:'<%= @location.name %>', territory:'<%= @location.territory %>', xco:<%= @location.xco %>, yco:<%= @location.yco %>, id:<%= @location.id %>, owner_id:<%= @location.user_id %>, kind:"<%= @location.kindType %>", capital:"<%= @location.capital %>", money:"<%= @location.money %>", food_units:"<%= @location.food_units %>", energy_units:"<%= @location.energy_units %>", population:"<%= @location.population %>", militants:"<%= @location.militants %>"})


	<%@game.game_attributes.each do |attribute|%>
console.log('/<%=attribute.id%>')
		publisher = client.publish('/<%=attribute.id%>', 'parseResponseObject("location",{name:"<%= @location.name %>", territory:"<%= @location.territory %>", xco:<%= @location.xco %>, yco:<%= @location.yco %>, id:<%= @location.id %>, owner_id:<%= @location.user_id %>, kind:"<%= @location.kindType %>", capital:"<%= @location.capital %>"})')
console.log(publisher)
	<% end %>
<%end%>

<%if @trade != nil%>

	parseResponseObject("location",{name:'<%= @location.name %>', territory:'<%= @location.territory %>', xco:<%= @location.xco %>, yco:<%= @location.yco %>, id:<%= @location.id %>, owner_id:<%= @location.user_id %>, kind:"<%= @location.kindType %>", capital:"<%= @location.capital %>", money:"<%= @location.money %>", food_units:"<%= @location.food_units %>", energy_units:"<%= @location.energy_units %>", population:"<%= @location.population %>", militants:"<%= @location.militants %>"})


	<%@game.game_attributes.each do |attribute|%>
console.log('/<%=attribute.id%>')
		publisher = client.publish('/<%=attribute.id%>', 'parseResponseObject("location",{name:"<%= @location.name %>", territory:"<%= @location.territory %>", xco:<%= @location.xco %>, yco:<%= @location.yco %>, id:<%= @location.id %>, owner_id:<%= @location.user_id %>, kind:"<%= @location.kindType %>", capital:"<%= @location.capital %>"})')
console.log(publisher)
	<% end %>
<%end%>
