# config.ru

require 'faye'
Faye::WebSocket.load_adapter('thin')

KEEPALIVE_TIME = 15 # in seconds

def call(env)
  if Faye::WebSocket.websocket?(env)
	ws = Faye::WebSocket.new(env, nil, {ping: KEEPALIVE_TIME })
  else
    @app.call(env)
  end

run ws


